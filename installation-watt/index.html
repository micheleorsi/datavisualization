<!DOCTYPE html>
<meta charset="utf-8">
<style>

.county-boundary {
  fill: none;
  stroke: #fff;
  stroke-width: .5px;
}


</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script>

var width = 960,
    height = 600;

// projection taken from here: https://groups.google.com/forum/#!topic/d3-js/lR7GGswygI8 
// var projection = d3.geo.albers() 
//       .translate([width / 2, height / 2]) 
//       .scale(2700) 
//       .rotate([122.4183, 0]) 
//       .center([0, 37.7750]);
      
// projection taken from here: http://shancarter.github.io/ucb-dataviz-fall-2013/classes/interactive-maps/final-map.html
// var projection = d3.geo.albers()
//      .translate([width / 2, height / 2])
//      .parallels([34, 40.5])
//      .rotate([120, 0])
//      .scale(3000);

// adapted
var projection = d3.geo.albers()
     .translate([width / 2, height / 2])
     .parallels([54, 40.5])
     .rotate([120, 0])
     .center([0, 37.7750])
     .scale(2700);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);


d3.json("output/CA_zip_2007.json", function(error, us) {
  if (error) throw error;

  svg.insert("path", ".graticule")
      .datum(topojson.mesh(us, us.objects.tl_2010_06_zcta510, function(a, b) { 
      	return a !== b && !(a.id / 1000 ^ b.id / 1000); 
      	}))
      .attr("class", "county-boundary")
      .attr("d", path);

  
});

d3.select(self.frameElement).style("height", height + "px");


</script>
